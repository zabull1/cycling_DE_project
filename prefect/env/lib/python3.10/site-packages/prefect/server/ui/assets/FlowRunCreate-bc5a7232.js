import{aZ as g,d as k,Z as D,aj as N,a_ as O,c as m,p as x,u as a,b as F,w as d,f as I,a2 as T,a3 as V,a$ as B,a as J,e as i,b0 as P,b1 as $,b2 as K,b3 as U,K as f}from"./index-7acf17d8-e892d89d.js";import{u as Z}from"./usePageTitle-608c8d53.js";import"./index-865946c8.js";import{r as y}from"./routes-09bc4e0d.js";class j extends g{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const q=k({__name:"FlowRunCreate",setup(w){const t=D(),s=N("deploymentId"),n=V(),p=O("parameters",j,void 0),_=m(()=>!e.value||!p.value?{}:B.map("SchemaValuesResponse",{schema:e.value.parameterOpenApiSchema,values:p.value},"SchemaValues")),h=x(t.deployments.getDeployment,[s]),e=m(()=>h.response),R=async r=>{var l,o;try{const u=await t.deployments.createDeploymentFlowRun(s.value,r),c=((o=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:o.scheduledTime)??void 0,S=!c,b=K(U,{flowRun:u,flowRunRoute:y.flowRun,router:n,immediate:S,startTime:c});f(b,"success"),n.push(y.deployment(s.value))}catch(u){f("Something went wrong trying to create a flow run","error"),console.error(u)}},v=()=>{n.back()},C=m(()=>e.value?`Create Flow Run for Deployment: ${e.value.name}`:"Create Flow Run for Deployment");return Z(C),(r,l)=>{const o=T("p-layout-default");return a(e)?(J(),F(o,{key:0},{header:d(()=>[i(a(P),{deployment:a(e)},null,8,["deployment"])]),default:d(()=>[i(a($),{deployment:a(e),parameters:a(_),onSubmit:R,onCancel:v},null,8,["deployment","parameters"])]),_:1})):I("",!0)}}});export{q as default};
